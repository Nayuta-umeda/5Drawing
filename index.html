<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>共同5秒アニメ - ロビー</title>
  <link rel="stylesheet" href="./styles.css" />
<style>

/* === SAFE-AREA + NO-OVERLAP LAYOUT (mobile-first) === */
:root{
  --safeTop: max(10vh, env(safe-area-inset-top, 0px));
  --safeBottom: max(10vh, env(safe-area-inset-bottom, 0px));
  --uiGap: 10px;
  --uiPad: 12px;
  --uiR: 16px;
  --uiText: clamp(12px, 2.3vw, 16px);
  --uiTextSm: clamp(11px, 2.1vw, 14px);
  --uiBtn: clamp(12px, 2.2vw, 15px);
  --uiBtnPadY: clamp(8px, 1.6vh, 12px);
  --uiBtnPadX: clamp(10px, 2.4vw, 14px);
}

html, body{ height:100%; }
body{
  margin:0;
  /* keep the OS/browser chrome clear */
  padding-top: var(--safeTop);
  padding-bottom: var(--safeBottom);
}

#app, .app, .wrap, .container{
  min-height: calc(100vh - var(--safeTop) - var(--safeBottom));
}

.safeShell{
  min-height: calc(100vh - var(--safeTop) - var(--safeBottom));
  display:flex;
  flex-direction:column;
  gap: var(--uiGap);
  padding: var(--uiPad);
  box-sizing:border-box;
}

.safeHeader{
  flex: 0 0 auto;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  font-size: var(--uiTextSm);
}

.safeMain{
  flex: 1 1 auto;
  display:flex;
  align-items:center;
  justify-content:center;
  min-height: 0; /* allow flex children to shrink */
}

.safeCanvasWrap{
  width: min(92vw, 420px);
  aspect-ratio: 1 / 1;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius: var(--uiR);
  overflow:hidden;
}

.safeFooter{
  flex: 0 0 auto;
  display:flex;
  flex-direction:column;
  gap: var(--uiGap);
}

.safeTabs{
  display:flex;
  gap: 8px;
}
.safeTabs button{
  font-size: var(--uiBtn);
  padding: var(--uiBtnPadY) var(--uiBtnPadX);
}

.safePanel{
  border-radius: var(--uiR);
  padding: 10px;
  font-size: var(--uiText);
}

.safeRow{
  display:flex;
  flex-wrap:wrap;
  gap: 8px;
  align-items:center;
}

.safeRow button, .safeRow input, .safeRow select{
  font-size: var(--uiBtn);
}

.verBadge{
  font-size: 11px;
  opacity: .65;
  user-select:none;
}

</style>
</head>
<body>
<div class="verBadge" id="verBadge">V15.2</div>
  <div class="container">
    <div class="card" style="padding:14px;">
      <div class="h1">共同5秒アニメ</div>
      <div class="small muted" style="margin-top:6px;">
        1人1コマで5秒アニメ。スマホ前提 / スクロール無し / 白&淡色。
      </div>
      <div style="height:10px;"></div>
      <div class="kv">
        <div class="k"><span>解像度</span><b>256×256</b></div>
        <div class="k"><span>コマ数</span><b>60</b></div>
        <div class="k"><span>fps</span><b>12</b></div>
        <div class="k"><span>担当</span><b>1人1コマ</b></div>
      </div>
    </div>

    <div class="card" style="padding:14px;">
      <div class="col">
        <button class="btn btnAccent" onclick="location.href='./create.html'">テーマを作成</button>
        <button class="btn btnAccent" onclick="location.href='./join_random.html'">テーマに参加（ランダム）</button>
        <button class="btn btnAccent" onclick="location.href='./gallery.html'">自分の作品</button>
      </div>
      <hr class="sep" />
      <div class="small muted">
        Render接続が怪しいときは <a class="badge" href="./ws-test.html">WSテスト</a> を使ってね。
      </div>
    </div>

    <div class="card" style="padding:14px;">
      <div class="h1" style="font-size:14px;">確定仕様（2026-01-15）</div>
      <div class="small muted" style="line-height:1.55; margin-top:6px;">
        公開「テーマを作成」は <b>1コマ目を提出した瞬間にだけ</b> サーバに部屋が生成されます（提出まで他人に反映されません / A案）。<br/>
        プライベート作品は <b>ローカル保存のみ</b>（サーバ保存なし）。<br/>
        「テーマに参加」は <b>予約トークン方式</b>（競合防止、期限あり）。
      </div>
    </div>
  </div>

  <script src="./config.js"></script>
  <script src="./common.js"></script>
  <script>
    window.V15.ensureLogUi();
    window.V15.addLog("page_load", { path: location.pathname });
  </script>
</body>
</html>
